@let tabValue = tab();

<a
  class="container"
  [recent]="tabValue.id"
  matRipple
  [href]="tabValue.url"
  [target]="target()">
  <nc-chip [source]="tabValue.favIconUrl | favicon: tabValue.url" />
  <div class="text-container">
    <div class="title-container">
      <span class="title">{{ tabValue.title }}</span>
      @if (isRecent()) {
        <mat-icon>search_activity</mat-icon>
      }
    </div>
    <div class="subtitle-container">
      @let active = hasActive();
      @let pinned = hasPinned();
      @let dup = hasDuplicate();

      @if (active || pinned || dup) {
        <span class="label-container">
          @if (active) {
            <nc-label>
              {{ 'open' | translate }}
            </nc-label>
          }

          @if (dup) {
            <nc-label>
              {{ 'duplicate' | translate }}
            </nc-label>
          }

          @if (pinned) {
            <nc-label>
              {{ 'pinned' | translate }}
            </nc-label>
          }
        </span>
      }
      <span class="subtitle">{{ tabValue.url }}</span>
    </div>
  </div>

  @let tabActions = actions();

  @if (tabActions?.length) {
    <div class="controls">
      @for (action of tabActions; track action) {
        <button
          stopPropagation
          mat-icon-button
          [matTooltip]="action.label | translate"
          (click)="handleAction(action)">
          <mat-icon>{{ action.icon }}</mat-icon>
        </button>
      }
    </div>
  }
</a>

@if (focused()) {
  <nc-ripple [focused]="focused()" />
}
