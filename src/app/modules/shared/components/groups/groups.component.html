<mat-accordion class="accordion-align">
  <ng-container *ngFor="let group of groups; let i = index">
    <div class="panel-controls" [class.visible]="currentPanelIndex === i">
      <div class="timestamp" matTooltip="{{ group.timestamp | date: 'medium' }}">
        {{ group.timestamp | date: 'mediumDate' }}
      </div>
      <div class="controls">
        <button mat-icon-button (click)="restoreTabs(group)" matTooltip="Restore">
          <mat-icon>restore</mat-icon>
        </button>
        <button mat-icon-button (click)="removeTabs(group)" matTooltip="Delete">
          <mat-icon>done_all</mat-icon>
        </button>
      </div>
    </div>
    <mat-expansion-panel hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <app-tab-icons [group]="group"></app-tab-icons>
        </mat-panel-title>
        <mat-panel-description>
          {{ group.tabs.length }} Tabs
        </mat-panel-description>
      </mat-expansion-panel-header>
      <mat-list>
        <ng-container *ngFor="let tab of group.tabs">
          <mat-divider></mat-divider>
          <mat-list-item>
            <div class="icon-container" mat-list-icon>
              <app-image-icon [source]="tab.favIconUrl"></app-image-icon>
            </div>
            <div mat-line class="heading">{{ tab.title }}</div>
            <a class="subheading" href="{{ tab.url }}" target="_blank" mat-line> {{ tab.url }} </a>
          </mat-list-item>
        </ng-container>
      </mat-list>
    </mat-expansion-panel>
  </ng-container>
</mat-accordion>
