<mat-accordion>
  <mat-expansion-panel
    *ngFor="let group of groups; trackBy: trackByGroupId"
    [appScrollIntoView]="(activeGroupId$ | async) === group.id"
    [appScrollIntoViewTabId]="activeTabId$ | async"
    [expanded]="(activeGroupId$ | async) === group.id && (activeTabId$ | async)"
    hideToggle>
    <mat-expansion-panel-header>
      <app-panel-header
        *ngIf="tabsByHostname$ | async as tabsByHostname"
        [icons]="tabsByHostname[group.id]"
        [total]="group.tabs.length">
      </app-panel-header>
      <app-group-controls [group]="group"></app-group-controls>
    </mat-expansion-panel-header>
    <mat-divider></mat-divider>
    <app-tab-list>
      <app-list-item
        *ngFor="let tab of group.tabs$ | async; trackBy: trackByTabId"
        [tab]="tab"
        (click)="handleItemClick(tab)"
      >
      </app-list-item>
    </app-tab-list>
  </mat-expansion-panel>
</mat-accordion>
