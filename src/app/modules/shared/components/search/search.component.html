<section class="controls-wrapper">
  <form class="search-form" [formGroup]="formGroup">
    <mat-form-field class="search-field" appearance="fill">
      <mat-icon matPrefix>search</mat-icon>
      <input type="text" 
        matInput 
        formControlName="search" 
        [placeholder]="'searchBookmarks' | translate" 
        autocomplete="off" />

      @if (hasSearchValue$ | async) {
        <button
          matSuffix
          mat-icon-button
          [disableRipple]="true"
          tabindex="-1"
          (click)="clearSearch()">
          <mat-icon>close</mat-icon>
        </button>
      }
    </mat-form-field>
  </form>
  <div class="controls">
    <button mat-icon-button
      color="primary"
      matTooltip="{{ 'addBookmarks' | translate }}"
      (click)="menuAction(Action.Save)">
      <mat-icon>add</mat-icon>
    </button>
  </div>
</section>

@if (hasSearchValue$ | async) {
  @if ((searchResults$ | async).length > 0) {
    <h3 class="results-count" [ngPlural]="(searchResults$ | async).length">
      <ng-template ngPluralCase="one">
        {{ 'oneResult' | translate }}
      </ng-template>
      <ng-template ngPluralCase="other">
        {{ 'resultCount' | translate: { count: (searchResults$ | async).length } }}
      </ng-template>
    </h3>
    <mat-card class="search-container">
      <app-tab-list>
        @for (tab of tabs$ | async; track tab) {
          <app-list-item
            [tab]="tab"
            (deleted)="itemDeleted($event)"
            (modified)="itemModified($event)"
            [timelineButton]="true">
          </app-list-item>
        }
      </app-tab-list>
    </mat-card>
  } @else {
    <app-empty>search_off</app-empty>
  }
} @else {
  <ng-content select=".layout-container"></ng-content>
}
